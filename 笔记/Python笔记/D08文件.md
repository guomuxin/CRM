# PythonDAY08

## 一、文件的操作初识

- 作用:持续化存储数据,之后会更多使用数据库来实现这一需求

- 操作模式

  - r 只读
  - w 只清空写
    - 1.打开文件时会清空内容
    - 2.之后再写入
  - a 追加
  - rb 只读字节  --主要用于爬虫
  - wb  只写字节
  - ab 追加字节
  - r+ 读写
  - w+ 清空写读
  - a+ 追加写读,打开文件后默认光标在最后,想要读的话需要先将光标移动到开头
  - 注:a,w,a+,w+,wb,ab如果文件不存在会先创建
  - 比较常用的有r,a,r+(要覆盖一部分内容时),a+(没文件时用)

- 文件的打开

  - f = open(file="文件名",mode="模式",encoding="编码方式")

    f被叫做文件的句柄

    利用python向操作系统发出指令

    file 和mode关键字可以省略,encoding必须写

    采用这种方式打开文件需要在使用完毕后close()该文件

  - with open(file="文件名",mode="模式",encoding="编码方式") as f:

    采用这种方式打开文件不需要手动关闭文件,可以操作多个文件,可以起别名

    操作多个文件时:

    ![1568711678490](.\Python基础DAY08.assets\1568711678490.png)

  - encoding参数需要与被打开文件的编码方式一致,否则会有问题

- 文件存储的内容全部都是字符串,写入的时候也只能写字符串

- 转义:

  - //:在关键字前面多加一个斜杠
  - r:在字符串之前写一个r,则字符串之内的索引特殊字符都被转义
  
- 文件路径:

  - 相对路径:相对于参照文件夹的位置,推荐使用
  - 绝对路径:绝对且唯一,与参照物无关

## 二、文件的操作

- 读:

  - 只能在r,r+,w+,a+模式下进行读操作
  - 文件读取只能读取一遍,因为光标会动
  - 方法:
    - f.read():全部读,可以加参数,在读字符模式下参数表示读几个字符,读字节模式下则表示读几个字节
    - f.readline():一行一行的读
    - f.readlines():读取多行,结果以列表格式显示
    - for i in f:这样也是一行一行读,省内存

  

- 写:

  - 只能在w,r+,w+,a+模式下进行写操作
    - w写:之前的内容全部清空,然后写	
    - a:不论光标在哪,总是在文件末尾追加
    - r+:会覆盖原内容,但不清空
    - w+:清空后写入
    - a+:和a一样
  - 方法:
    - write():参数为写入内容,必须为字符串

- 特殊操作

  - r+模式下先写后读

    ![1568707748928](.\Python基础DAY08.assets\1568707748928.png)
  
  - w+模式下读写:无论先读还是先写都是什么都读不出来,一般不用
  
    ![1568707957491](C:\Users\WO\Desktop\Python笔记\Python基础DAY08.assets\1568707957491.png)

- 光标的操作
  - seek():移动光标
    - seek(0,0):移动到头部
    - seek(0,1):移动到当前位置,一般没什么用
    - seek(0,2):移动到末尾
    - seek(),参数为字节数,所以编码方式不同的情况下光标移动的长度不同
  - tell():返回当前光标的位置,返回的是字节数.常与seek配合使用
- 文件的修改:
  - 1.以读方式打开文件,用for一行一行读取内容
  - 2.对每一行内容进行替换更改
  - 3.将内容写入一个新文件
  - 4.将两个文件使用os模块的rename进行改名